<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title></title>
  </head>
  <body>
    <p style="font-size:1.5em;">Is <code>setTimeout</code> really <strong>significantly</strong> slower when passing string value (rather than function one)?</p>
    <p>It doesn't seem to be the case in modern engines.</p>
    <script type="text/javascript">
    
      var result, x = 1, y = 2;
      
      (function(){
        var iterations = 700;
        var times = 10;
        
        var setTimeout = window.setTimeout; // eliminate lookup in global scope

        function f1(x,y){ setTimeout('result = x + y', 10); }
        
        function fn(){ result = x + y; };
        function f2(){ setTimeout(fn, 10); }
        
        var compiledFn = Function('result = x + y');
        function f3(){ setTimeout(compiledFn, 10); }

        function getAverage(callback) {
          var results = [ ], start, end, i, j, sum = 0;
          for (j = times; j--; ) {
            start = new Date();
            for (i = iterations; i--; ) {
              callback();
            }
            end = new Date() - start;
            results.push(end);
          }
          for (i = 0; i < results.length; i++) {
            sum += results[i];
          }
          return sum / times;
        }
        
        document.body.innerHTML += ('<p>Runnning test ' + times + ' times, ' + iterations + ' iterations each</p>');
        
        setTimeout(function(){
          var average1 = getAverage(f1);
          document.body.innerHTML += ('setTimeout(\'...\', 10): <strong>' + average1 + '</strong>ms<br>');

          setTimeout(function(){
            var average2 = getAverage(f2);
            document.body.innerHTML += ('function f(){ ... }; setTimeout(f, 10): <strong>' + average2 + '</strong>ms<br>');

            setTimeout(function(){
              var average3 = getAverage(f3);

              document.body.innerHTML += ('var compiled = Function(\'...\'); setTimeout(compiled, 10): <strong>' + average3 + '</strong>ms');
            }, 1000);
          }, 1000);
        }, 1000);
        
      })();
    </script>
  </body>
</html>